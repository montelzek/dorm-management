<!-- Mobile Card View -->
<div class="md:hidden space-y-4">
  @for (resident of residents(); track resident.id) {
    <div class="bg-card rounded-lg border border-card-border p-4 hover:bg-background transition-colors">
      <!-- Header with Name -->
      <div class="flex items-start justify-between mb-3">
        <div>
          <h3 class="text-base font-semibold text-text-primary">
            {{ resident.firstName }} {{ resident.lastName }}
          </h3>
          <p class="text-sm text-text-secondary mt-1">{{ resident.email }}</p>
        </div>
      </div>

      <!-- Details Grid -->
      <div class="space-y-2 mb-3">
        <div class="flex justify-between text-sm">
          <span class="text-text-secondary">{{ 'residents.phone' | translate }}:</span>
          <span class="text-text-primary">{{ resident.phone || 'N/A' }}</span>
        </div>
        <div class="flex justify-between text-sm">
          <span class="text-text-secondary">{{ 'table.building' | translate }}:</span>
          <span class="text-text-primary">{{ resident.buildingName }}</span>
        </div>
        <div class="flex justify-between text-sm">
          <span class="text-text-secondary">{{ 'residents.room' | translate }}:</span>
          <span class="text-text-primary">{{ resident.roomNumber }}</span>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-2 pt-3 border-t border-card-border">
        <button
          (click)="onAssignRoom(resident)"
          class="flex-1 px-3 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950 rounded-md hover:bg-indigo-100 dark:hover:bg-indigo-900 transition-colors cursor-pointer"
        >
          {{ hasRoom(resident) ? ('residents.change' | translate) : ('residents.assign' | translate) }} {{ 'residents.room' | translate }}
        </button>
        <button
          (click)="onDeleteResident(resident)"
          class="flex-1 px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950 rounded-md hover:bg-red-100 dark:hover:bg-red-900 transition-colors cursor-pointer"
        >
          {{ 'common.delete' | translate }}
        </button>
      </div>
    </div>
  }
</div>

<!-- Desktop Table View -->
<div class="hidden md:block overflow-x-auto">
  <table class="min-w-full divide-y divide-card-border">
    <thead class="bg-background">
    <tr>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary cursor-pointer hover:text-text-primary"
          (click)="onSort('firstName')">
        <div class="flex items-center gap-1">
          {{ 'residents.firstName' | translate }}
          @if (sortBy() === 'firstName') {
            <span>{{ sortDirection() === 'asc' ? '↑' : '↓' }}</span>
          }
        </div>
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary cursor-pointer hover:text-text-primary"
          (click)="onSort('lastName')">
        <div class="flex items-center gap-1">
          {{ 'residents.lastName' | translate }}
          @if (sortBy() === 'lastName') {
            <span>{{ sortDirection() === 'asc' ? '↑' : '↓' }}</span>
          }
        </div>
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary">
        {{ 'residents.email' | translate }}
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary">
        {{ 'residents.phone' | translate }}
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary">
        {{ 'residents.buildingName' | translate }}
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary">
        {{ 'residents.roomNumber' | translate }}
      </th>
      <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-text-secondary">
        {{ 'residents.actions' | translate }}
      </th>
    </tr>
    </thead>
    <tbody class="divide-y divide-card-border bg-card">
      @for (resident of residents(); track resident.id) {
        <tr class="hover:bg-background transition-colors">
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.firstName }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.lastName }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.email }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.phone || 'N/A' }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.buildingName }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            {{ resident.roomNumber }}
          </td>
          <td class="whitespace-nowrap px-6 py-4 text-sm text-text-secondary">
            <div class="flex gap-3">
              <button
                (click)="onAssignRoom(resident)"
                class="text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium transition-colors cursor-pointer"
                [title]="hasRoom(resident) ? ('residents.changeRoom' | translate) : ('residents.assignRoom' | translate)"
              >
                {{ hasRoom(resident) ? ('residents.change' | translate) : ('residents.assign' | translate) }} {{ 'residents.room' | translate }}
              </button>
              <button
                (click)="onDeleteResident(resident)"
                class="text-red-600 hover:text-red-500 dark:text-red-400 dark:hover:text-red-300 font-medium transition-colors cursor-pointer"
                [title]="'residents.deleteResident' | translate"
              >
                {{ 'common.delete' | translate }}
              </button>
            </div>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>
