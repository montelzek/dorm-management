@if (isMobileMenuOpen()) {
  <div class="fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden" (click)="closeMobileMenu()"></div>
}

<aside class="fixed left-0 top-0 z-50 h-full w-64 bg-card border-r border-card-border flex flex-col transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:relative lg:z-auto"
       [class.translate-x-0]="isMobileMenuOpen()"
       [class.-translate-x-full]="!isMobileMenuOpen()">

  <div class="flex items-center justify-between p-6 border-b border-card-border">
    <div class="flex items-center gap-3">
      <img ngSrc="/logo-indigo.svg" alt="logo" class="h-9 w-9" height="36" width="36"/>
      <span class="text-xl font-bold text-text-primary">MyDorm</span>
    </div>

    <button class="lg:hidden p-2 rounded-md text-text-secondary hover:bg-background hover:text-text-primary transition-colors"
            (click)="closeMobileMenu()">
      <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <nav class="flex-1 p-4">
    <ul class="space-y-2">
      @for (link of navigationLinks; track link.route) {
        <li>
          @if (link.disabled) {
            <span class="flex items-center gap-3 px-3 py-2 text-sm font-medium text-text-secondary cursor-not-allowed opacity-50">
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="link.iconPath" />
              </svg>
              {{ link.label }}
            </span>
          } @else {
            <a [routerLink]="link.route"
               routerLinkActive="text-button-bg bg-button-bg/10 border-l-4 border-button-bg pl-2 font-semibold hover:bg-button-bg/10 hover:text-button-bg"
               [routerLinkActiveOptions]="{exact: true}"
               class="flex items-center gap-3 px-3 py-2 text-sm font-medium text-text-secondary rounded-lg hover:bg-background hover:text-text-primary transition-colors"
               (click)="closeMobileMenu()">
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="link.iconPath" />
              </svg>
              {{ link.label }}
            </a>
          }
        </li>
      }
    </ul>
  </nav>

  <div class="p-4 border-t border-card-border">
    <a (click)="logout()"
       [routerLink]="logoutAction.route"
       class="flex items-center gap-3 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 rounded-lg transition-colors dark:text-red-400 dark:hover:bg-red-900/20">
      <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="logoutAction.iconPath" />
      </svg>
      {{ logoutAction.label }}
    </a>
  </div>
</aside>
